var TxtType=function(e,o,t){this.toRotate=o,this.el=e,this.loopNum=0,this.period=parseInt(t,10)||1e3,this.txt="",this.tick(),this.isDeleting=!1};TxtType.prototype.tick=function(){var e=this.loopNum%this.toRotate.length,o=this.toRotate[e];this.isDeleting?this.txt=o.substring(0,this.txt.length-1):this.txt=o.substring(0,this.txt.length+1),this.el.innerHTML='<span class="wrap">'+this.txt+"</span>";var t=this,n=120-100*Math.random();this.isDeleting&&(n/=2),this.isDeleting||this.txt!==o?this.isDeleting&&""===this.txt&&(this.isDeleting=!1,this.loopNum++,n=500,$("#slider").slick("slickNext")):(n=this.period,this.isDeleting=!0),setTimeout(function(){t.tick()},n)},window.onload=function(){for(var e=document.getElementsByClassName("typewrite"),o=0;o<e.length;o++){var t=e[o].getAttribute("data-type"),n=e[o].getAttribute("data-period");t&&new TxtType(e[o],JSON.parse(t),n)}},$(".hearbalTablinks").click(function(){var e=$(this).attr("data-target");return $(".master-bank-result").hide(),$(e).show(),$(".health-bank-item>li").removeClass("select"),$(this).parent().addClass("select"),!1}),setTimeout(function(){$(".master-bank-result").hide(),$(".hearbalTablinks:eq(0)").click()},1e3);var activeStep,prevStep,journeyType,mainSearchErrorTemplate='خطا در انجام عملیات لطفا دقایقی دیگر تلاش نمائید یا از دکمه پایین جهت به روز رسانی استفاده کنید<button class="mainSearchRefreshPage" onclick="location.reload()" >به روز رسانی</button>',res_doctors_items_to_data_layor=[],url=new URL(window.location);window.onpopstate=function(){$(".jrny-modal").hasClass("isVisible")?(window.history.pushState(null,"",window.location.href),activeStep===stepEnums.mainJrny?closeModal():goingBack()):history.back()};var stepEnums={mainJrny:"mainJrny",findDr:"findDr",selectCat:"selectCat","selectCat-findDrJrny":"selectCat-findDrJrny","selectCat-emergencyJrny":"selectCat-emergencyJrny","selectCat-checkupJrny":"selectCat-checkupJrny","selectSubCat-findDrJrny":"selectSubCat-findDrJrny","selectSubCat-emergencyJrny":"selectSubCat-emergencyJrny","selectSubCat-checkupJrny":"selectSubCat-checkupJrny","suggestDoctor-findDrJrny":"suggestDoctor-findDrJrny","suggestDoctor-findDrJrny-backToCat":"suggestDoctor-findDrJrny-backToCat","suggestDoctor-findDrJrny-backToSicknessSearch":"suggestDoctor-findDrJrny-backToSicknessSearch","suggestDoctor-findDrJrny-findSickness":"suggestDoctor-findDrJrny-findSickness","suggestDoctor-emergencyJrny-backToCat":"suggestDoctor-emergencyJrny-backToCat","suggestDoctor-emergencyJrny-publicDr":"suggestDoctor-emergencyJrny-publicDr","suggestDoctor-checkupJrny-backToCat":"suggestDoctor-checkupJrny-backToCat","suggestDoctor-checkupJrny-publicDr":"suggestDoctor-checkupJrny-publicDr",checkup:"checkup",findSickness:"findSickness",homeLab:"homeLab","mental-health":"mental-health"},stepsArray=[[stepEnums.findDr,stepEnums.mainJrny],[stepEnums.checkup,stepEnums.mainJrny],[stepEnums.selectCat,stepEnums.mainJrny],[stepEnums["selectCat-emergencyJrny"],stepEnums.mainJrny],[stepEnums["selectCat-findDrJrny"],stepEnums.findDr],[stepEnums["selectCat-checkupJrny"],stepEnums.checkup],[stepEnums["selectSubCat-emergencyJrny"],stepEnums["selectCat-emergencyJrny"]],[stepEnums["selectSubCat-findDrJrny"],stepEnums["selectCat-findDrJrny"]],[stepEnums["selectSubCat-checkupJrny"],stepEnums["selectCat-checkupJrny"]],[stepEnums["suggestDoctor-checkupJrny"],stepEnums["selectSubCat-checkupJrny"]],[stepEnums["suggestDoctor-emergencyJrny-publicDr"],stepEnums["selectCat-emergencyJrny"]],[stepEnums["suggestDoctor-emergencyJrny-backToCat"],stepEnums["selectCat-emergencyJrny"]],[stepEnums["suggestDoctor-checkupJrny-publicDr"],stepEnums.checkup],[stepEnums["suggestDoctor-checkupJrny-backToCat"],stepEnums["selectCat-checkupJrny"]],[stepEnums["suggestDoctor-findDrJrny-findSickness"],stepEnums.findSickness],[stepEnums["suggestDoctor-findDrJrny-backToCat"],stepEnums["selectCat-findDrJrny"]],[stepEnums["suggestDoctor-findDrJrny"],stepEnums["selectSubCat-findDrJrny"]],[stepEnums.findSickness,stepEnums["selectCat-findDrJrny"]],[stepEnums["suggestDoctor-findDrJrny-backToSicknessSearch"],stepEnums.findSickness],[stepEnums.homeLab,stepEnums.mainJrny],[stepEnums["mental-health"],stepEnums.mainJrny]],journeyEnum={emergencyJrny:"emergencyJrny",checkupJrny:"checkupJrny",findDrJrny:"findDrJrny",homeLabJrny:"homeLabJrny",mentalHealthJrny:"mentalHealthJrny"};function goingBack(){switch(activeStep){case stepEnums.selectCat:case stepEnums["selectCat-findDrJrny"]:case stepEnums["selectCat-emergencyJrny"]:case stepEnums["selectCat-checkupJrny"]:$("#categoryList").empty();break;case stepEnums["selectSubCat-findDrJrny"]:case stepEnums["selectSubCat-emergencyJrny"]:case stepEnums["selectSubCat-checkupJrny"]:$("#subCategoryList").empty();break;case stepEnums.findDr:$(".jrny-modal-findDr-emptyState").removeClass("d-none").addClass("isVisible"),$(".jrny-modal-findDr-not-found").removeClass("isVisible").addClass("d-none"),$(".jrny-modal-findDr-doctorList").removeClass("isVisible").addClass("d-none").empty(),$("#doctorSearchInput").val("");break;case stepEnums.findSickness:$(".jrny-modal-findSickness-list").empty(),$("#sicknessSearchInput").val("");break;case stepEnums["suggestDoctor-findDrJrny"]:case stepEnums["suggestDoctor-emergencyJrny"]:case stepEnums["suggestDoctor-checkupJrny"]:case stepEnums["suggestDoctor-findDrJrny-findSickness"]:case stepEnums["suggestDoctor-findDrJrny-backToCat"]:case stepEnums["suggestDoctor-findDrJrny-backToSicknessSearch"]:case stepEnums["suggestDoctor-emergencyJrny-publicDr"]:case stepEnums["suggestDoctor-emergencyJrny-backToCat"]:case stepEnums["suggestDoctor-checkupJrny-publicDr"]:case stepEnums["suggestDoctor-checkupJrny-backToCat"]:$(".jrny-modal-doctorSuggestion-loader").removeClass("d-none"),$(".jrny-modal-doctorSuggestion-found-layout").removeClass("isVisible");break;default:console.log("nothing")}for(var e=0;e<stepsArray.length;e++)if(stepsArray[e][0]===activeStep){activeStep=stepsArray[e][1],stepsArray.map(function(e){e[0]===activeStep&&(prevStep=e[1])}),onChangeStep(activeStep);break}hideGetCategoriesLoading()}function goForward(e){prevStep=activeStep,onChangeStep(activeStep=e)}function onChangeStep(e){switch(e){case stepEnums.mainJrny:$(".jrny-modal-first").addClass("isVisible-flex"),$(".jrny-modal-main").addClass("jrny-home-modal-blurry-bg"),$(".jrny-modal-header").addClass("bg-transparent"),$(".jrny-modal-header span, .jrny-modal-header .icon.icon-right-direction").css("visibility","hidden"),$(".jrny-modal-body:not(.jrny-modal-first)").removeClass("isVisible isVisible-flex");break;case stepEnums.findDr:$(".jrny-modal-header span, .jrny-modal-header .icon.icon-right-direction").css("visibility","unset"),$(".jrny-modal-findDr-body").addClass("isVisible"),$(".jrny-modal-body:not(.jrny-modal-findDr-body)").removeClass("isVisible isVisible-flex"),$(".jrny-modal-header> span").text("جست و جوی پزشک مورد نظر"),$(".jrny-modal-header").removeClass("bg-transparent");break;case stepEnums.selectCat:case stepEnums["selectCat-findDrJrny"]:case stepEnums["selectCat-emergencyJrny"]:case stepEnums["selectCat-checkupJrny"]:$(".jrny-modal-header span, .jrny-modal-header .icon.icon-right-direction").css("visibility","unset"),$(".jrny-modal-selectCategory-body").addClass("isVisible"),$(".jrny-modal-body:not(.jrny-modal-selectCategory-body)").removeClass("isVisible isVisible-flex"),$(".jrny-modal-header").removeClass("bg-transparent"),$(".jrny-modal-header> span").text("انتخاب تخصص مورد نیاز");break;case stepEnums["selectSubCat-findDrJrny"]:case stepEnums["selectSubCat-emergencyJrny"]:case stepEnums["selectSubCat-checkupJrny"]:$(".jrny-modal-header span, .jrny-modal-header .icon.icon-right-direction").css("visibility","unset"),$(".jrny-modal-selectSubCategory-body").addClass("isVisible"),$(".jrny-modal-body:not(.jrny-modal-selectSubCategory-body)").removeClass("isVisible isVisible-flex"),$(".jrny-modal-header").removeClass("bg-transparent");break;case stepEnums["suggestDoctor-findDrJrny"]:case stepEnums["suggestDoctor-emergencyJrny"]:case stepEnums["suggestDoctor-checkupJrny"]:case stepEnums["suggestDoctor-findDrJrny-findSickness"]:case stepEnums["suggestDoctor-findDrJrny-backToCat"]:case stepEnums["suggestDoctor-findDrJrny-backToSicknessSearch"]:case stepEnums["suggestDoctor-emergencyJrny-publicDr"]:case stepEnums["suggestDoctor-emergencyJrny-backToCat"]:case stepEnums["suggestDoctor-checkupJrny-publicDr"]:case stepEnums["suggestDoctor-checkupJrny-backToCat"]:$(".jrny-modal-header span, .jrny-modal-header .icon.icon-right-direction").css("visibility","unset"),$(".jrny-modal-doctorSuggestion-body").addClass("isVisible"),$(".jrny-modal-body:not(.jrny-modal-doctorSuggestion-body)").removeClass("isVisible isVisible-flex"),$(".jrny-modal-header").removeClass("bg-transparent"),$(".jrny-modal-header> span").text("پیشنهاد پزشک");break;case stepEnums.checkup:$(".jrny-modal-header span, .jrny-modal-header .icon.icon-right-direction").css("visibility","unset"),$(".jrny-modal-checkup-main").addClass("isVisible-flex"),$(".jrny-modal-body:not(.jrny-modal-checkup-main)").removeClass("isVisible isVisible-flex"),$(".jrny-modal-header").removeClass("bg-transparent"),$(".jrny-modal-header> span").text("انتخاب شیوه مشاوره");break;case stepEnums.findSickness:$(".jrny-modal-header span, .jrny-modal-header .icon.icon-right-direction").css("visibility","unset"),$(".jrny-modal-findSickness-body").addClass("isVisible"),$(".jrny-modal-body:not(.jrny-modal-findSickness-body)").removeClass("isVisible isVisible-flex"),$(".jrny-modal-header").removeClass("bg-transparent"),$(".jrny-modal-header> span").text("جست و جو در تخصص ها و بیماری ها");break;case stepEnums.homeLab:$(".jrny-modal-header span, .jrny-modal-header .icon.icon-right-direction").css("visibility","unset"),$(".jrny-modal-homeLab-main").addClass("isVisible-flex"),$(".jrny-modal-body:not(.jrny-modal-homeLab-main)").removeClass("isVisible isVisible-flex"),$(".jrny-modal-header").removeClass("bg-transparent"),$(".jrny-modal-header> span").text("آزمایش در منزل");break;case stepEnums["mental-health"]:$(".jrny-modal-header span, .jrny-modal-header .icon.icon-right-direction").css("visibility","unset"),$(".jrny-modal-mental-health-main").addClass("isVisible-flex"),$(".jrny-modal-body:not(.jrny-modal-mental-health-main)").removeClass("isVisible isVisible-flex"),$(".jrny-modal-header").removeClass("bg-transparent"),$(".jrny-modal-header> span").text("مشاوره روانشناسی و روانپزشکی");break;default:console.log("default")}}function openFindDrJourney(){journeyType=journeyEnum.findDrJrny,$(".jrny-modal-selectCategory-footer> a.general-dr").removeClass("isVisible-flex"),$(".jrny-modal-selectCategory-footer> a.select-sickness").addClass("isVisible-flex").on("click",function(){goForward(stepEnums.findSickness)}),$(".jrny-modal-selectCategory-footer").removeClass("d-none"),$(".jrny-modal-selectCategory-list").css("height","calc(100% - 110px)"),goForward(stepEnums.findDr),$(".jrny-modal-findDr-emptyState").removeClass("d-none").addClass("isVisible"),$(".jrny-modal-findDr-not-found").removeClass("isVisible").addClass("d-none"),$(".jrny-modal-findDr-doctorList").removeClass("isVisible").addClass("d-none").empty(),$("#doctorSearchInput").val("")}function openEmergencyJourney(){journeyType=journeyEnum.emergencyJrny,goForward(stepEnums["selectCat-emergencyJrny"]),$(".jrny-modal-selectCategory-footer> a.select-sickness").removeClass("isVisible-flex"),$(".jrny-modal-selectCategory-footer> a.general-dr").addClass("isVisible-flex").on("click",function(){openSuggestedDoctor(!0,"","","",!0,"","general-practitioner",null)}),$(".jrny-modal-selectCategory-footer").removeClass("d-none"),$(".jrny-modal-selectCategory-list").css("height","calc(100% - 110px)"),fetchCategories()}function openCheckupJourney(){journeyType=journeyEnum.checkupJrny,$(".jrny-modal-selectCategory-footer").addClass("d-none"),$(".jrny-modal-selectCategory-list").css("height","100%"),goForward(stepEnums.checkup)}function openHomeLabJourney(){journeyType=journeyEnum.homeLabJrny,goForward(stepEnums.homeLab)}function openMentalHealthJourney(){journeyType=journeyEnum.mentalHealthJrny,goForward(stepEnums["mental-health"])}function openSicknessSearch(){$(".jrny-modal-findSickness-list").empty(),$("#sicknessSearchInput").val(""),goForward(stepEnums.findSickness)}function openSuggestDrCategory(){goForward(stepEnums["selectCat-findDrJrny"]),fetchCategories()}function openSuggestedDoctor(e,o,t,n,s){hideGetCategoriesLoading();var r=arguments.length<=5||void 0===arguments[5]?"":arguments[5],i=arguments.length<=6||void 0===arguments[6]?"":arguments[6],a=arguments.length<=7||void 0===arguments[7]?null:arguments[7],d=arguments.length<=8||void 0===arguments[8]?null:arguments[8],c=arguments.length<=9||void 0===arguments[9]?null:arguments[9],l=journeyType===journeyEnum.findDrJrny?3:journeyType===journeyEnum.checkupJrny?2:journeyType===journeyEnum.emergencyJrny?1:0;if(e){if($(".jrny-modal-doctorSuggestion-loader").removeClass("d-none"),$(".jrny-modal-doctorSuggestion-found-layout").removeClass("isVisible"),3===l){$(".jrny-modal-doctorSuggestion-body-title , .jrny-modal-doctorSuggestion-body-description").removeClass("d-none"),$(".jrny-modal-doctorSuggestion-body-emergency-description").addClass("d-none"),$(".jrny-modal-doctorSuggestion-show-more-btn").removeClass("d-none"),$(".jrny-modal-doctorSuggestion-found-layout-top").css("height","calc(100% - 80px)");var u=a?"?parentId="+a:"";$(".doctorSuggestion-show-more-btn").attr("href",window.location.origin+"/consultation/"+i+u),fetchDoctorInfo(o,t,n),goForward(d?stepEnums["suggestDoctor-findDrJrny-backToCat"]:c?stepEnums["suggestDoctor-findDrJrny-backToSicknessSearch"]:stepEnums["suggestDoctor-findDrJrny"])}else if(1===l)$(".jrny-modal-doctorSuggestion-body-title , .jrny-modal-doctorSuggestion-body-description").addClass("d-none"),$(".jrny-modal-doctorSuggestion-body-emergency-description").removeClass("d-none"),$(".jrny-modal-doctorSuggestion-show-more-btn").addClass("d-none"),$(".jrny-modal-doctorSuggestion-found-layout-top").css("height","100%"),s?(fetchGeneralPractitionerDoctorData(),goForward(stepEnums["suggestDoctor-emergencyJrny-publicDr"])):d?(fetchDoctorInfo(o,t,n),goForward(stepEnums["suggestDoctor-emergencyJrny-backToCat"])):(fetchDoctorInfo(o,t,n),goForward(stepEnums["suggestDoctor-emergencyJrny"]));else if(2===l){$(".jrny-modal-doctorSuggestion-body-title , .jrny-modal-doctorSuggestion-body-description").removeClass("d-none"),$(".jrny-modal-doctorSuggestion-body-emergency-description").addClass("d-none"),$(".jrny-modal-doctorSuggestion-show-more-btn").removeClass("d-none"),$(".jrny-modal-doctorSuggestion-found-layout-top").css("height","calc(100% - 80px)");var y=a?"?parentId="+a:"";$(".doctorSuggestion-show-more-btn").attr("href",window.location.origin+"/consultation/"+i+y),s?(fetchGeneralPractitionerDoctorData(),goForward(stepEnums["suggestDoctor-checkupJrny-publicDr"])):d?(fetchDoctorInfo(o,t,n),goForward(stepEnums["suggestDoctor-checkupJrny-backToCat"])):(fetchDoctorInfo(o,t,n),goForward(stepEnums["suggestDoctor-checkupJrny"]))}}else redirectHandler("/consultation/"+r)}function redirectHandler(e){window.location=window.location.origin+e}function fetchDoctorInfo(o,e,t){var n=window.location.origin+"/Journey/GetSuggestedDoctor/"+e+"/?journeyType="+o+"&diseaseId="+t;$.ajax({url:n,method:"GET",success:function(e){null===e.doctor?redirectHandler("/consultation/"+e.categorySlug):1===o?(pushDataLayerDoctorSeenItem({name:e.doctor.fullName,id:e.doctor.guid,position:0,list:"journey.urgent_doctor",category:e.doctor.reportCategoryTitle}),pushDataLayerDoctorClickItem({name:e.doctor.fullName,id:e.doctor.guid,position:0,list:"journey.urgent_doctor",category:e.doctor.reportCategoryTitle}),pushDataLayerDoctorDetailItem({name:e.doctor.fullName,id:e.doctor.guid,category:e.doctor.reportCategoryTitle}),redirectHandler("/doctorConsulationQuestion/"+e.doctor.guid+"/"+e.doctor.selectedPlanId+"/?flowType="+o)):(fillDoctorInfo(e.doctor,o),pushDataLayerDoctorSeenItem({name:e.doctor.fullName,id:e.doctor.guid,position:0,list:"journey.check_up",category:e.doctor.reportCategoryTitle}))}})}function fetchGeneralPractitionerDoctorData(){var o=journeyType===journeyEnum.findDrJrny?3:journeyType===journeyEnum.checkupJrny?2:journeyType===journeyEnum.emergencyJrny?1:0,e=window.location.origin+"/Journey/GetSuggestedGeneralPractitioner?journeyType="+o;$.ajax({url:e,method:"GET",success:function(e){null===e?redirectHandler("/consultation/"+e.categorySlug):(fillDoctorInfo(e,o),pushDataLayerDoctorSeenItem({name:e.fullName,id:e.guid,position:0,list:"journey.check_up",category:e.reportCategoryTitle}))}})}function fillDoctorInfo(e,o){$(".jrny-modal-doctorSuggestion-loader").addClass("d-none"),$(".jrny-modal-doctorSuggestion-found-layout").addClass("isVisible"),$("#doctorSuggestion-dr-cmnt-count").text(e.commentCount+"نظر"),$("#doctorSuggestion-dr-questions-count").text(e.consultationCount+"سوال (در مدت"+e.createDate+")"),$("#doctorSuggestion-dr-experience").text(e.experience),$("#doctorSuggestion-dr-img").attr("src",e.profilePicture),$("#doctorSuggestion-dr-score").text((e.rate/20).toFixed()).prepend('<i class="jrny-modal-doctorSuggestion-body-dr-score-icon icon icon-fill-star"></i>'),$(".jrny-modal-doctorSuggestion-body-dr-name").text(e.fullName),$(".jrny-modal-doctorSuggestion-body-dr-specialty").text(e.expertise),e.insuranceIsActive?$(".jrny-modal-doctorSuggestion-body-dr-insurance").removeClass("d-none"):$(".jrny-modal-doctorSuggestion-body-dr-insurance").addClass("d-none"),3===o?$(".jrny-modal-doctorSuggestion-body-dr-btn").attr("href",window.location.origin+"/doctorConsulation/"+e.guid+"/?flowType="+o):($(".jrny-modal-doctorSuggestion-body-dr-btn").attr("href",window.location.origin+"/doctorConsulationQuestion/"+e.guid+"/"+e.selectedPlanId+"/?flowType="+o),$(".jrny-modal-doctorSuggestion-body-dr-btn").click(function(){pushDataLayerDoctorClickItem({name:e.fullName,id:e.guid,position:0,list:"journey.check_up",category:e.reportCategoryTitle}),pushDataLayerDoctorDetailItem({name:e.fullName,id:e.guid,category:e.reportCategoryTitle})}))}function searchDoctors(){$(".jrny-modal-findDr-doctorList").empty();var e=$("#doctorSearchInput").val();if(!(e.length<1)){var o=$(".jrny-modal-findDr-emptyState"),t=$(".jrny-modal-findDr-not-found"),n=$(".jrny-modal-findDr-doctorList"),s=window.location.origin+"/Journey/DoctorSearch?keyword="+e;$.ajax({url:s,method:"GET",success:function(e){n.empty(),e.length<1?(t.removeClass("d-none").addClass("isVisible"),o.removeClass("isVisible").addClass("d-none"),n.removeClass("isVisible").addClass("d-none")):(t.removeClass("isVisible").addClass("d-none"),o.removeClass("isVisible").addClass("d-none"),n.removeClass("d-none").addClass("isVisible"),renderDoctorSearchResult(e))},error:function(e){t.removeClass("d-none").addClass("isVisible"),o.removeClass("isVisible").addClass("d-none"),n.removeClass("isVisible").addClass("d-none")}})}}function renderDoctorSearchResult(n){var s=[];function e(){$(".jrny-modal-findDr-doctorList > li").each(function(){var o=n[$(this).index()];if(-1==s.findIndex(function(e){return e.doctorGuid===o.doctorGuid})){var e=$(this)[0].getBoundingClientRect(),t=$(".jrny-modal-findDr-doctorList")[0].getBoundingClientRect();t.bottom>=e.bottom&&t.top<=e.top&&(s.push(o),pushDataLayerDoctorSeenItem({name:o.fullName,id:o.doctorGuid,position:$(this).index(),list:"journey.seek_doctor",category:o.reportCategoryTitle}))}})}(res_doctors_items_to_data_layor=n).forEach(function(e){$(".jrny-modal-findDr-doctorList").append("\n                <li onclick=\"onClickDoctorRow('"+e.doctorGuid+'\' )" class="jrny-modal-findDr-doctorList-item">\n                    <img src="'+e.profilePicture+'" class="jrny-modal-findDr-doctorList-doctorImage" />\n                    <div class="jrny-modal-findDr-doctorList-doctorInfo">\n                        <label>'+e.fullName+"</label>\n                        <span>"+e.expertiseTitle+'</span>\n                    </div>  \n                    <i class="icon icon-arrow-left"></i>\n                </li>\n            ')}),setTimeout(function(){e(),$(".jrny-modal-findDr-doctorList").on("scroll",function(){e()})},500)}function pushDataLayerDoctorSeenItem(e){dataLayer.push({ecommerce:null}),dataLayer.push({event:"eec.productImpression",ecommerce:{impressions:[{name:e.name,id:e.id,category:e.category,list:e.list,position:e.position}]}})}function setCookie(e,o,t){var n="expires="+t;document.cookie=e+"="+o+";"+n+";path=/"}function pushDataLayerDoctorDetailItem(e){dataLayer.push({ecommerce:null});var o=new Date;o.setTime(o.getTime()+36e5),setCookie("ecommerce_detail_"+e.id,"1",o.toUTCString()),dataLayer.push({event:"eec.productDetail",ecommerce:{detail:{products:[{name:e.name,id:e.id,category:e.category}]}}})}function pushDataLayerDoctorClickItem(e){dataLayer.push({ecommerce:null}),dataLayer.push({event:"eec.productClick",ecommerce:{click:{actionField:{list:e.list},products:[{name:e.name,id:e.id,category:e.category,position:e.position}]}}})}function onClickDoctorRow(o){var e=res_doctors_items_to_data_layor.findIndex(function(e){return e.doctorGuid===o});if(-1<e){var t=res_doctors_items_to_data_layor[e];pushDataLayerDoctorClickItem({name:t.fullName,id:t.doctorGuid,position:e,list:"journey.seek_doctor",category:t.reportCategoryTitle})}var n=journeyType===journeyEnum.findDrJrny?3:journeyType===journeyEnum.checkupJrny?2:journeyType===journeyEnum.emergencyJrny?1:0;return redirectHandler("/doctorConsulation/"+o+"/?flowType="+n)}function searchSickness(){$(".jrny-modal-findSickness-list").empty();var t=journeyType===journeyEnum.findDrJrny?3:journeyType===journeyEnum.checkupJrny?2:journeyType===journeyEnum.emergencyJrny?1:0,e=$("#sicknessSearchInput").val();if(!(e.length<1)){var o=window.location.origin+"/Journey/DiseaseSearch?keyword="+e;$.ajax({url:o,method:"GET",success:function(e){var o=$(".jrny-modal-findSickness-list");o.empty(),e.forEach(function(e){o.append('<li onclick="openSuggestedDoctor(true, '+t+", "+e.categoryId+", "+e.diseaseId+", false, '', '"+e.categorySlug+"', null , "+!1+" , "+!0+' )"><span>'+e.title+'</span><i class="icon icon-arrow-left"></i></li>')})},error:function(e){}})}}function openCheckupCategories(){$("#categoryList").empty(),fetchCategories(),goForward(stepEnums["selectCat-checkupJrny"])}function openSubCategories(e,o,t,n,s){if(hideGetCategoriesLoading(),$("#subCategoryList").empty(),$(".selectSubCategory-show-more-btn").text("مشاهده پزشکان "+o).attr("href",window.location.origin+"/consultation/"+n),t||s)if(!t&&s){openSuggestedDoctor(s,journeyType===journeyEnum.findDrJrny?3:journeyType===journeyEnum.checkupJrny?2:journeyType===journeyEnum.emergencyJrny?1:0,e,null,!1,"",n,"",!0)}else fetchSubCategories(e,n),journeyType===journeyEnum.findDrJrny?goForward(stepEnums["selectSubCat-findDrJrny"]):journeyType===journeyEnum.checkupJrny?goForward(stepEnums["selectSubCat-checkupJrny"]):goForward(stepEnums["selectSubCat-emergencyJrny"]),$(".jrny-modal-selectSubCategory .jrny-modal-header> span").text(o);else redirectHandler("/consultation/"+n)}function closeModal(){$(".jrny-modal").removeClass("isVisible"),$("body").css("overflow","unset")}function fetchCategories(){var e=journeyType===journeyEnum.findDrJrny?3:journeyType===journeyEnum.checkupJrny?2:journeyType===journeyEnum.emergencyJrny?1:0,o=window.location.origin+"/Journey/GetCategories?journeyType="+e;showGetCategoriesLoading(),$.ajax({url:o,method:"GET",success:function(e){e.forEach(function(e){$("#categoryList").append('<li onclick="openSubCategories('+e.id+" ,'"+e.title+"', "+e.hasChild+", '"+e.slug+"', '"+e.hasDoctor+"')\"><span>"+e.title+'</span><i class="icon icon-arrow-left"></i></li>')}),hideGetCategoriesLoading()},error:function(e){hideGetCategoriesLoading()}})}function fetchSubCategories(o,t){var n=journeyType===journeyEnum.findDrJrny?3:journeyType===journeyEnum.checkupJrny?2:journeyType===journeyEnum.emergencyJrny?1:0,e=window.location.origin+"/Journey/GetCategories?journeyType="+n+"&parentId="+o;showGetCategoriesLoading(),$.ajax({url:e,method:"GET",success:function(e){e.forEach(function(e){$("#subCategoryList").append('\n                        <li onclick="openSuggestedDoctor('+e.hasDoctor+", "+n+", "+(e.isDisease?o:e.id)+", "+(e.isDisease?e.id:null)+", false, '"+e.slug+"', '"+(e.isDiease?t:e.slug)+"', "+o+')">\n                            <span>'+e.title+'</span>\n                            <i class="icon icon-arrow-left"></i>\n                        </li>\n                    ')}),hideGetCategoriesLoading()},error:function(e){hideGetCategoriesLoading()}})}function showGetCategoriesLoading(){$("#jrny-modal-selectCategory-body__loader, #jrny-modal-selectSubCategory-body__loader").removeClass("d-none")}function hideGetCategoriesLoading(){$("#jrny-modal-selectCategory-body__loader, #jrny-modal-selectSubCategory-body__loader").addClass("d-none")}var activeStepVideoC,prevStepVidoeC,journeyTypeVideoC,lastSubTitleVideoC,lastCatIdVideoCJouenry,lastCategoryClickedSlugForVideoJourney,doctorsListPageNumber=1,tempResultOfDoctorsSuggestionVideoC=[];url=new URL(window.location);function startVideoCallJourney(){var e=$(".video-c-jrny-modal");e.addClass("isVisible"),fetchVideoCCategories(),$("body").css("overflow","hidden"),activeStepVideoC=videoCstepEnums.selectCat,onChangeStepVideoC(videoCstepEnums.selectCat),$(".video-c-jrny-modal-findDr-doctorList").empty(),$(document).ready(function(){$("#video-c-jrny-modal-header-search-input").on("keyup",function(e){var o=e.target.value;$("#videoCcategoryList > li").each(function(e){!o||$(this).attr("data-caption").includes(o)?$(this).css("display","flex"):$(this).css("display","none")})}),e.hasClass("isVisible")&&window.history.pushState(null,"",window.location.href)})}setTimeout(function(){"#video-c"===window.location.hash&&startVideoCallJourney()},1e3);var videoCstepEnums={selectCat:"@selectCat","selectCat-subCat":"selectCat-subCat","select-doctor":"select-doctor"};function goingBackVideoC(){switch(activeStepVideoC){case videoCstepEnums.selectCat:$("#categoryList").empty();break;case videoCstepEnums["selectCat-subCat"]:$("#subCategoryVideoCList").empty(),onChangeStepVideoC(videoCstepEnums.selectCat),activeStepVideoC=videoCstepEnums.selectCat,$(".video-c-jrny-modal-header> span").text("انتخاب تخصص");break;case videoCstepEnums["select-doctor"]:lastSubTitleVideoC?(onChangeStepVideoC(videoCstepEnums["selectCat-subCat"]),activeStepVideoC=videoCstepEnums["selectCat-subCat"],$(".video-c-jrny-modal-header> span").text(" انتخاب تخصص در"+lastSubTitleVideoC)):(onChangeStepVideoC(videoCstepEnums.selectCat),activeStepVideoC=videoCstepEnums.selectCat,$(".video-c-jrny-modal-header> span").text("انتخاب تخصص "));break;default:console.log("nothing")}hideGetCategoriesLoadingVideoC()}function goForwardVideoC(e){prevStepVidoeC=activeStepVideoC,onChangeStepVideoC(activeStepVideoC=e)}function onChangeStepVideoC(e){switch(e){case videoCstepEnums.selectCat:$(".video-c-jrny-modal-header span, .video-c-jrny-modal-header .icon.icon-right-direction").css("visibility","unset"),$(".video-c-jrny-modal-selectCategory-body").addClass("isVisible"),$(".video-c-jrny-modal-body:not(.video-c-jrny-modal-selectCategory-body)").removeClass("isVisible isVisible-flex"),$(".video-c-jrny-modal-header").removeClass("bg-transparent"),$(".video-c-jrny-modal-header-search-container").removeClass("d-none"),$(".video-c-jrny-modal-header").removeClass("bg-transparent"),$(".video-c-jrny-modal-header> span").text("انتخاب تخصص"),$(".video-c-jrny-modal-header> i.icon-right-direction").css("visibility","hidden");break;case videoCstepEnums["selectCat-subCat"]:$(".video-c-jrny-modal-header span, .video-c-jrny-modal-header .icon.icon-right-direction").css("visibility","unset"),$(".video-c-jrny-modal-selectSubCategory-body").addClass("isVisible"),$(".video-c-jrny-modal-body:not(.video-c-jrny-modal-selectSubCategory-body)").removeClass("isVisible isVisible-flex"),$(".video-c-jrny-modal-header").removeClass("bg-transparent"),$(".video-c-jrny-modal-header-search-container").addClass("d-none"),$(".video-c-jrny-modal-header> i.icon-right-direction").css("visibility","initial");break;case videoCstepEnums["select-doctor"]:$(".video-c-jrny-modal-doctorSuggestion-body").addClass("isVisible"),$(".video-c-jrny-modal-body:not(.video-c-jrny-modal-doctorSuggestion-body)").removeClass("isVisible isVisible-flex"),$(".video-c-jrny-modal-header").removeClass("bg-transparent"),$(".video-c-jrny-modal-header-search-container").addClass("d-none"),$(".video-c-jrny-modal-header> i.icon-right-direction").css("visibility","initial"),$(".video-c-jrny-modal-header> span").text("پیشنهاد پزشک");break;default:console.log("default")}}function openSuggestDrCategoryVideoC(){goForwardVideoC(videoCstepEnums["selectCat-findDrJrny"]),fetchVideoCCategories()}function redirectHandlerVideoC(e){window.location=window.location.origin+e}function pushDataLayerDoctorSeenItemVideoC(e){dataLayer.push({ecommerce:null}),dataLayer.push({event:"eec.productImpression",ecommerce:{impressions:[{name:e.name,id:e.id,category:e.category,list:e.list,position:e.position}]}})}function setCookieVideoC(e,o,t){var n="expires="+t;document.cookie=e+"="+o+";"+n+";path=/"}function pushDataLayerDoctorDetailItemVideoC(e){dataLayer.push({ecommerce:null});var o=new Date;o.setTime(o.getTime()+36e5),setCookieVideoC("ecommerce_detail_"+e.id,"1",o.toUTCString()),dataLayer.push({event:"eec.productDetail",ecommerce:{detail:{products:[{name:e.name,id:e.id,category:e.category}]}}})}function pushDataLayerDoctorClickItemVideoC(e){dataLayer.push({ecommerce:null}),dataLayer.push({event:"eec.productClick",ecommerce:{click:{actionField:{list:e.list},products:[{name:e.name,id:e.id,category:e.category,position:e.position}]}}})}function openVideoCSubCategoriesVideoC(e,o,t,n,s){hideGetCategoriesLoadingVideoC(),$("#subCategoryVideoCList").empty(),lastCategoryClickedSlugForVideoJourney=n,t||s?lastSubTitleVideoC=!t&&s?(goForwardVideoC(videoCstepEnums["select-doctor"]),doctorsListPageNumber=1,goToGetDoctorListForCatVideoC(lastCatIdVideoCJouenry=e),null):(goForwardVideoC(videoCstepEnums["selectCat-subCat"]),fetchSubCategoriesVideoC(e,n),$(".video-c-jrny-modal-header> span").text("انتخاب تخصص در "+o),o):redirectHandlerVideoC("/consultation/"+n)}function closeVideoCModal(){$(".video-c-jrny-modal").removeClass("isVisible"),$("body").css("overflow","unset")}function fetchVideoCCategories(){var e=window.location.origin+"/Journey/GetVideoCallJourneyCategory";$("#videoCcategoryList").empty(),showGetCategoriesLoadingVideoC(),$.ajax({url:e,method:"GET",success:function(e){e.forEach(function(e){$("#videoCcategoryList").append('<li class="Video-Consultation-Category-Btn" data-caption="'+e.title+'" onclick="openVideoCSubCategoriesVideoC('+e.id+" ,'"+e.title+"', "+e.hasChild+", '"+e.slug+"', '"+e.hasDoctor+"')\"><span>"+e.title+'</span><i class="icon icon-arrow-left"></i></li>')}),hideGetCategoriesLoadingVideoC()},error:function(e){hideGetCategoriesLoadingVideoC()}})}function onClickDoctorRowVideoC(o){var e=tempResultOfDoctorsSuggestionVideoC.findIndex(function(e){return e.guid===o});if(-1<e){var t=tempResultOfDoctorsSuggestionVideoC[e];pushDataLayerDoctorClickItemVideoC({name:t.fullName,id:t.guid,position:e,list:"video.journey.suggest_doctor",category:t.reportCategoryTitle}),pushDataLayerDoctorDetailItemVideoC({name:t.fullName,id:t.guid,category:t.reportCategoryTitle})}}function goToGetDoctorListForCatVideoC(e){var o=window.location.origin+"/Journey/GetVideoCallJourneySuggestedDoctors/"+e+"?page="+doctorsListPageNumber;if("general"==e)o=window.location.origin+"/Journey/GetVideoCallSuggestedGeneralPractitioner?page="+doctorsListPageNumber;showGetCategoriesLoadingVideoC(),$("#doctorsListResultContainer").empty(),$.ajax({url:o,method:"GET",success:function(e){if(!e)return hideGetCategoriesLoadingVideoC(),void alert("هیچ پزشکی یافت نشد");Array.isArray(e.data)&&(tempResultOfDoctorsSuggestionVideoC=e.data,e.data.forEach(function(e,o){$("#doctorsListResultContainer").append('<div class="video-c-jrny-modal-doctorSuggestion-body-dr-card"> <div class="video-c-jrny-modal-doctorSuggestion-body-dr-card-body"> <div class="video-c-jrny-modal-doctorSuggestion-body-dr-img"> <img id="doctorSuggestion-dr-img" src="'+e.profilePicture+'" /> <i class="doctor-suggest-status online-status rounded-circle"></i> </div> <div class="video-c-jrny-modal-doctorSuggestion-body-dr-info"> <h2 class="video-c-jrny-modal-doctorSuggestion-body-dr-name"> '+e.fullName+' </h2> <h3 class="video-c-jrny-modal-doctorSuggestion-body-dr-specialty"> '+e.expertise+' </h3> <div class="video-c-jrny-modal-doctorSuggestion-body-dr-score"> <label id="doctorSuggestion-dr-score"> <i class="video-c-jrny-modal-doctorSuggestion-body-dr-score-icon icon icon-fill-star" ></i >'+(e.rate/20).toFixed()+' </label> <span id="doctorSuggestion-dr-cmnt-count" >'+e.commentCount+' نظر</span > </div> </div> </div> <div class="video-c-jrny-modal-doctorSuggestion-info_bottom_container"> <div style="display: flex;justify-content: flex-end;"><span class="video-c-jrny-modal-doctorSuggestion-body-dr-insurance insurance-label '+(e.insuranceIsActive?" ":" d-none ")+'" > <img src="/themes/_shared/images/insurance.svg" alt="" width="16px" height="16px" /> <label>مشاوره با بیمه</label> </span> </div> <div class="video-c-jrny-modal-doctorSuggestion-body-dr-questions-count"> <span style="font-weight: bold;font-size:12px" id="doctorSuggestion-dr-questions-count" ><span style="font-size:12px ;font-weight: 400;">تعداد مشاروه:</span> '+e.consultationCount+" سوال (در مدت "+e.createDate+')</span > </div> <div class="video-c-jrny-modal-doctorSuggestion-body-dr-experience"> <label style="font-size: 12px ;font-weight: 400;">تجربه:</label> <span style="font-weight: bold;font-size:12px" id="doctorSuggestion-dr-experience">'+e.experience+'</span> </div> <a class=" video-c-jrny-modal-doctorSuggestion-body-dr-btn" onclick="onClickDoctorRowVideoC(\''+e.guid+'\' )"  href="/PrePayment/ask/'+e.guid+"/"+e.selectedPlanId+'?flowType=0"> شروع مشاوره ویدیویی </a> </div> </div> '),pushDataLayerDoctorSeenItemVideoC({name:e.fullName,id:e.guid,position:o,list:"video.journey.suggest_doctor",category:e.reportCategoryTitle})}));var o=Number((e.totalCount/e.pageSize).toFixed(0)),t=$(".video-c-jrny-modal-doctorSuggestion-show-more-btn");o>e.page?(t.removeClass("d-none"),$(".video-c-jrny-modal-doctorSuggestion-found-layout-top").css("height","calc(100% - 80px)")):(t.addClass("d-none"),$(".video-c-jrny-modal-doctorSuggestion-found-layout-top").css("height","100%")),hideGetCategoriesLoadingVideoC()},error:function(e){hideGetCategoriesLoadingVideoC()}})}function fetchNewSubCatDoctorListVideoC(e){goForwardVideoC(videoCstepEnums["select-doctor"]),doctorsListPageNumber=1,goToGetDoctorListForCatVideoC(lastCatIdVideoCJouenry=e)}function fetchSubCategoriesVideoC(e,o){var t=window.location.origin+"/Journey/GetVideoCallJourneyCategory?parentId="+e;showGetCategoriesLoadingVideoC(),$.ajax({url:t,method:"GET",success:function(e){hideGetCategoriesLoadingVideoC(),e.forEach(function(e){$("#subCategoryVideoCList").append('\n                        <li onclick="fetchNewSubCatDoctorListVideoC('+e.id+')">\n                            <span>'+e.title+'</span>\n                            <i class="icon icon-arrow-left"></i>\n                        </li>\n                    ')})},error:function(e){hideGetCategoriesLoadingVideoC()}})}function showGetCategoriesLoadingVideoC(){$("#video-c-jrny-modal-selectCategory-body__loader, #video-c-jrny-modal-selectSubCategory-body__loader").removeClass("d-none")}function hideGetCategoriesLoadingVideoC(){$("#video-c-jrny-modal-selectCategory-body__loader, #video-c-jrny-modal-selectSubCategory-body__loader").addClass("d-none")}function showOtherDoctorsVideoCJourney(){window.open("/consultation/"+lastCategoryClickedSlugForVideoJourney+"?cb_hasVideoCall=true&cb_isOnline=true","_self")}function videoCByGeneralDoctorGetList(){doctorsListPageNumber=1,lastSubTitleVideoC=null,lastCatIdVideoCJouenry="general",lastCategoryClickedSlugForVideoJourney="general-practitioner",goForwardVideoC(videoCstepEnums["select-doctor"]),goToGetDoctorListForCatVideoC("general")}